<!--
/**
 * Smile_ElasticsuiteThesaurus module configuration
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Smile ElasticSuite to newer
 * versions in the future.
 *
 * @category  Smile
 * @package   Smile\ElasticsuiteThesaurus
 * @author    Richard BAYET <richard.bayet@smile.fr>
 * @copyright 2024 Smile
 * @license   Open Software License ("OSL") v. 3.0
 */
-->
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:module:Magento_Config:etc/system_file.xsd">
    <system>
        <section id="smile_elasticsuite_thesaurus_settings" translate="label" type="text" sortOrder="1000" showInDefault="1" showInWebsite="1" showInStore="1">
            <label>Thesaurus (global settings)</label>
            <tab>smile_elasticsuite</tab>
            <resource>Smile_ElasticsuiteThesaurus::manage</resource>

            <group id="cache" translate="label" type="text" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1">
                <label>Cache settings</label>
                <field id="always" translate="label comment" type="select" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1" canRestore="1">
                    <label>Always cache thesaurus application results</label>
                    <source_model>Magento\Config\Model\Config\Source\Yesno</source_model>
                    <comment><![CDATA[Set this to "No" to conditionally cache the results of user search query rewriting by active thesaurus rules. This can be used in peak trafic times to reduce the impact on your cache component with a trade-off of an increased volume of analysis requests sent to Elasticsearch/Opensearch and increased CPU usage.]]></comment>
                </field>
                <field id="min_rewrites" translate="label comment" type="text" sortOrder="10" showInDefault="1" showInWebsite="1" showInStore="1" canRestore="1">
                    <label>Minimum amount of alternative queries</label>
                    <validate>integer validate-zero-or-greater</validate>
                    <depends>
                        <field id="always">0</field>
                    </depends>
                    <comment><![CDATA[The minimum amount of alternative queries that must be generated for a given original user search for enabling the storage of the results in the cache component. Set this to 1, for instance, to only cache the results when there is at least one alternative query generated by the thesaurus rules. Defaults to 0: cache storage is used even when there is no alternative queries through the thesaurus.]]></comment>
                </field>
            </group>
        </section>
    </system>
</config>
